#!/usr/bin/perl

use locale;
use POSIX qw(locale_h);
setlocale(LC_ALL, "de_DE.utf8");

binmode(STDERR, ":utf8");
binmode(STDOUT, ":utf8");
binmode(STDIN, ":utf8");

while (<STDIN>) {
  if (/\*\*/) {
    my $last = pop @input;
    push @input, $last.$_;
  } else {
    push @input, $_;
  }
}

@sort = sort @input;

@abc = qw/A B C D E F G H I J K L M N O P Q R S T U V W X Y Z/;
$buchstabe = shift @abc;
print "=== 0-9 ===\n";
  
while($entry = shift @sort) {
  $entry =~ /^.*?\[\[(.*?)\]\]/ or next;
  $name = $1;
  while ($buchstabe && $name ge $buchstabe) {
    print "\n=== $buchstabe ===\n";
    $buchstabe = shift @abc;
  }
  print $entry;
}

while ($buchstabe = shift @abc) {
  print "\n=== $buchstabe ===\n";
}

